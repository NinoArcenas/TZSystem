@model TADTitleConversion.Models.ClientInfoStatus
@{
    ViewBag.Title = "UploadFile";

    string account = "";
    string project = "";
    string company_name = "";
    string location = "";
    string rd_location = "";
    string ass_location = "";
    string financing = "";
    string unit_no = "";

    int status = 0;
    int id = 0;
    string Gencode = "";
    foreach (var cis in ViewBag.clients)
    {
        id = cis.id;
        account = cis.account;
        project = cis.project;
        company_name = cis.company_name;
        status = cis.status;
        location = cis.location;
        rd_location = cis.rd_location;
        ass_location = cis.ass_location;
        financing = cis.financing;
        unit_no = cis.unit_no;
        Gencode = cis.generatedcode;
    }
}

<body class="background-White" style="background-color:white">
    <div class="widget-body" style="background-color:white">
        <div class="page-header">
            <h1>
                Upload File
                <small>
                    <i class="ace-icon fa fa-angle-double-right"></i>
                    for Process
                </small>
            </h1>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div class="widget-box widget-color-blue3">
                    <div class="widget-header">
                        <h4 class="widget-title">Account</h4>
                    </div>
                    <div class="widget-body">
                        <div class="col-xs-12 col-sm-4" style="display:none">
                            <label for="form-field-select-3">Status:</label>
                            <b for="form-field-select-2">@status.ToString()</b>
                            <input type="text" id="status" value="@status" class="width-100" />
                        </div>

                        <div class="col-xs-12 col-sm-4" style="display:none">
                            <label for="form-field-select-3">ID:</label>
                            <b for="form-field-select-2">@id</b>
                            <input type="text" id="id" value="@id" class="width-100" />
                        </div>

                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Account Name:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@account" id="account" disabled />
                                </div>
                            </div>
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Project:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@project" id="project" disabled />
                                </div>
                            </div>
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Unit No:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@unit_no" id="unitno" disabled />
                                </div>
                            </div>
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Company Name:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@company_name" id="company_name" disabled />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">BIR Location:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@location" id="location" disabled />
                                </div>
                            </div>
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">RD Location:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@rd_location" id="rd_location" disabled />
                                </div>
                            </div>
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Assessor Location:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@ass_location" id="ass_location" disabled />
                                </div>
                            </div>
                            <div class="form-group has-info">
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Financing:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@financing" id="financing" disabled />
                                </div>
                            </div>
                        </div>
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12">
                <div class="widget-box widget-color-blue3">
                    <div class="widget-header">
                        <div class="widget-title">
                            File Data
                            <div class="widget-toolbar">
                                <div class="pull-center">
                                    <a class="btn btn-xs btn-pink no-hover" data-toggle="modal" data-target="#ModalAddFileUpload">
                                        <i class="ace-icon fa fa-paperclip bigger-130"></i>
                                        <span class="bigger-110">Add File</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <table id="documentfile" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th class="center">Account Name</th>
                                <th class="center">Document File</th>
                                <th class="center">Document Name</th>
                                <th class="center">Project</th>
                                <th class="center">Unit No</th>
                                <th class="center">Remarks</th>
                                <th class="center">Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                int count = 100000;
                                foreach (var cis in ViewBag.docs)
                                {
                                    count += cis.id;

                                    if (cis.accountname == account)
                                    {
                                        <tr>
                                            <td style="text-align:center">
                                                <label>
                                                    @cis.accountname
                                                </label>
                                            </td>
                                            <td style="text-align:center">
                                                <label>
                                                    @cis.document_file_name
                                                </label>
                                            </td>
                                            <td style="text-align:center">
                                                <label>
                                                    @cis.documentname
                                                </label>
                                            </td>
                                            <td style="text-align:center">
                                                <label>
                                                    @cis.project
                                                </label>
                                            </td>
                                            <td style="text-align:center">
                                                <label>
                                                    @cis.unitno
                                                </label>
                                            </td>
                                            <td style="text-align:center">
                                                <label>
                                                    @cis.remarks
                                                </label>
                                            </td>
                                            <td style="text-align:center">
                                                <label>
                                                    <a href="@cis.doc_path"><img src="~/Images/pdf(1).jpg" /></a>
                                                </label>
                                            </td>
                                        </tr>
                                    }
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="modal fade" id="ModalAddFileUpload" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" style="text-align:left" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h5 class="modal-title" id="exampleModalLabel">Add New Document</h5>
                    </div>
                    <div class="modal-body" id="chooseclient">
                        @using (Html.BeginForm("UploadFile", "Masters", FormMethod.Post, new { enctype = "multipart/form-data" }))
                        {
                            <div class="col-xs-12 col-sm-4" hiddens>
                                <label for="form-field-select-3">Gencode:</label>
                                <b for="form-field-select-2"></b>
                                <input type="text" id="Gencode" name="Gencode" value="@Gencode" class="width-100" />
                            </div>
                            <div class="col-xs-12 col-sm-4" hidden>
                                <label for="form-field-select-3">ID:</label>
                                <b for="form-field-select-2"></b>
                                <input type="text" id="id" name="id" value="@id" class="width-100" />
                            </div>
                            <div class="col-xs-12 col-sm-4" hidden>
                                <label for="form-field-select-3">Status:</label>
                                <b for="form-field-select-2">@status.ToString()</b>
                                <input type="text" id="status" name="status" value="@status" class="width-100" />
                            </div>
                            <div class="form-group has-info" hidden>
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Account Name:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input type="text" value="@account" name="accountname">
                                </div>
                            </div>
                            <div class="form-group has-info" hidden>
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Project:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@project" name="project">
                                </div>
                            </div>
                            <div class="form-group has-info" hidden>
                                <b for="inputInfo" class="col-sm-9 control-label no-padding-right">Unit No:</b>
                                <div class="col-xs-12 col-sm-12">
                                    <input class="width-100" type="text" value="@unit_no" name="Unit">
                                </div>
                            </div>
                            <div class="form-group has-info col-sm-12">
                                <label for="inputInfo" class="col-xs-12 col-sm-2 control-label no-padding-right"><small style="color: red">*</small>Location:</label>
                                <div class="col-sm-6">
                                    <div class="input-group">
                                        @Html.DropDownListFor(model => model.account, new SelectList(ViewBag.project, "Value", "Text"), "--Please select Customer Name--", new { @class = "chosen-select form-control", id = "documentfilename", name = "documentfilename", style = "width: 142%" })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group has-info col-sm-12">
                                <label for="inputInfo" class="col-sm-3 control-label no-padding-right"><small style="color: red">*</small>Document Name:</label>
                                <div class="col-sm-9">
                                    <select id="documentname" name="documentname" class="form-control input-xlarge"></select>
                                </div>
                            </div>
                            <div class="form-group has-info col-sm-12">
                                <label for="inputInfo" class="col-xs-12 col-sm-2 control-label no-padding-right"><small style="color: red">*</small>UploadFile:</label>
                                <div class="col-sm-9">
                                    <div class="input-group">
                                        <div class="col-sm-12">
                                            <input class="form-control input-sm" style="width:134%" type="file" name="file" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group has-info col-sm-12">
                                <label for="inputInfo" class="col-xs-12 col-sm-2 control-label no-padding-right"><small style="color: red">*</small>Comments:</label>
                                <div class="col-sm-9">
                                    <div class="input-group has-info col-xs-11">
                                        <textarea class="form-control limited" name="commentFile" id="commentFile"></textarea>
                                    </div>
                                </div>
                            </div>
                            <input class="width-100" type="text" id="DocumentFileName" name="DocumentFileName" style="display:none"/>
                            <div class="modal-footer">
                                <button type="submit" id="SaveDocs" class="btn btn-primary btn-round btn-sm no-hover">Save</button>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>


@section Scripts {

    @Scripts.Render("~/bundles/jqueryval")

    <script>
        $(document).ready(function () {
            $(document).ready(function () {
                $('#documentfile').DataTable();
            });
            //Add File
            $(function () {
                $("#startdate").datepicker({
                    dateFormat: 'MM dd, yy',
                    format: 'MM dd, yy',
                });
                $("#expirydate").datepicker({
                    dateFormat: 'MM dd, yy',
                    format: 'MM dd, yy',
                });
                $("#completeddate").datepicker({
                    dateFormat: 'yy-mm-dd',
                    format: 'YYYY/MM/DD HH:mm:ss',
                });
            });

            $("#SaveDocs").click(function () {
                var doc = $("#documentfilename").val()
                var docname = $("#documentname").val()
                if (doc != "" && docname != "") {
                }
                else {
                    alert("Don't empty this field.");
                }
            });

            $("#documentfilename").change(function () {
                
                var prodocs = $("#documentfilename").val()
                $("#DocumentFileName").val(prodocs);
                var urlRequestWaterReading = "/Masters/Docs?project=" + prodocs
                
                //var url = "/Masters/Docs?project=" + prodocs
                $.get(urlRequestWaterReading, function (data) {
                    var docs = '';
                    $.each(data, function (index, water) {
                        //alert(data);
                        docs += "<option>" + water.documents + "</option>";
                    });
                    document.getElementById("documentname").innerHTML = docs;
                    alert(prodocs);
                });
            });


        });
    </script>
}